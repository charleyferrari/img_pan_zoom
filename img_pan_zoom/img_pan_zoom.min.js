window.img_pan_zoom=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=window.PropTypes},function(e,t){e.exports=window.React},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,a,i=(t=u,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),console.log("construcotr"),i.call(this,e)}return n=u,(r=[{key:"componentDidMount",value:function(){var e=this;console.log("componentdidmount");var t=new Image;t.src=this.props.src;var n=this.props.id,r=document.getElementById(n),o=r.getContext("2d");this.trackTransforms(o),t.onload=function(){e.redraw(o,r,t)};var a,i,u=r.width/2,s=r.height/2,f=function(n){var a=o.transformedPoint(u,s);o.translate(a.x,a.y);var i=Math.pow(1.1,n);o.scale(i,i),o.translate(-a.x,-a.y),e.redraw(o,r,t)},c=function(e){var t=e.wheelDelta?e.wheelDelta/40:e.detail?-e.detail:0;return t&&f(t),e.preventDefault()&&!1};r.addEventListener("mousedown",(function(e){document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",u=e.offsetX||e.pageX-r.offsetLeft,s=e.offsetY||e.pageY-r.offsetTop,a=o.transformedPoint(u,s),i=!1})),r.addEventListener("mousemove",(function(n){if(u=n.offsetX||n.pageX-r.offsetLeft,s=n.offsetY||n.pageY-r.offsetTop,i=!0,a){var f=o.transformedPoint(u,s);o.translate(f.x-a.x,f.y-a.y),e.redraw(o,r,t)}})),r.addEventListener("mouseup",(function(e){a=null,i||f(e.shiftKey?-1:1)})),r.addEventListener("DOMMouseScroll",c),r.addEventListener("mousewheel",c)}},{key:"componentDidUpdate",value:function(){var e=this;console.log("componentdidupdate");var t=new Image;t.src=this.props.src;var n=this.props.id,r=document.getElementById(n),o=r.getContext("2d");t.onload=function(){e.redraw(o,r,t)};var a=r.width/2,i=r.height/2,u=void 0,s=void 0,f=function(n){var u=o.transformedPoint(a,i);o.translate(u.x,u.y);var s=Math.pow(1.1,n);o.scale(s,s),o.translate(-u.x,-u.y),e.redraw(o,r,t)},c=function(e){var t=e.wheelDelta?e.wheelDelta/40:e.detail?-e.detail:0;return t&&f(t),e.preventDefault()&&!1};r.addEventListener("mousedown",(function(e){document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",a=e.offsetX||e.pageX-r.offsetLeft,i=e.offsetY||e.pageY-r.offsetTop,u=o.transformedPoint(a,i),s=!1})),r.addEventListener("mousemove",(function(n){if(a=n.offsetX||n.pageX-r.offsetLeft,i=n.offsetY||n.pageY-r.offsetTop,s=!0,u){var f=o.transformedPoint(a,i);o.translate(f.x-u.x,f.y-u.y),e.redraw(o,r,t)}})),r.addEventListener("mouseup",(function(e){u=null,s||f(e.shiftKey?-1:1)})),r.addEventListener("DOMMouseScroll",c),r.addEventListener("mousewheel",c)}},{key:"render",value:function(){console.log("render");var e=this.props,t=e.id,n=e.height,r=e.width;return e.src,e.setProps,o.a.createElement("canvas",{id:t,width:String(r),height:String(n)})}},{key:"trackTransforms",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=t.createSVGMatrix();e.getTransform=function(){return n};var r=[],o=e.save;e.save=function(){return r.push(n.translate(0,0)),o.call(e)};var a=e.restore;e.restore=function(){return n=r.pop(),a.call(e)};var i=e.scale;e.scale=function(t,r){return n=n.scaleNonUniform(t,r),i.call(e,t,r)};var u=e.rotate;e.rotate=function(t){return n=n.rotate(180*t/Math.PI),u.call(e,t)};var s=e.translate;e.translate=function(t,r){return n=n.translate(t,r),s.call(e,t,r)};var f=e.transform;e.transform=function(r,o,a,i,u,s){var c=t.createSVGMatrix();return c.a=r,c.b=o,c.c=a,c.d=i,c.e=u,c.f=s,n=n.multiply(c),f.call(e,r,o,a,i,u,s)};var c=e.setTransform;e.setTransform=function(t,r,o,a,i,u){return n.a=t,n.b=r,n.c=o,n.d=a,n.e=i,n.f=u,c.call(e,t,r,o,a,i,u)};var l=t.createSVGPoint();e.transformedPoint=function(e,t){return l.x=e,l.y=t,l.matrixTransform(n.inverse())}}},{key:"redraw",value:function(e,t,n){var r=e.transformedPoint(0,0),o=e.transformedPoint(t.width,t.height);e.clearRect(r.x,r.y,o.x-r.x,o.y-r.y),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),e.restore(),e.drawImage(n,50,50)}}])&&s(n.prototype,r),a&&s(n,a),u}(r.Component);p.defaultProps={},p.propTypes={id:i.a.string,height:i.a.number,width:i.a.number,src:i.a.string,setProps:i.a.func},n.d(t,"ImgPanZoom",(function(){return p}))}]);
//# sourceMappingURL=img_pan_zoom.min.js.map